---
import Card from './Card.astro';
import { Icon } from 'astro-icon/components';

export interface Props {
  title: string;
  description: string;
  icon?: string;
  iconSrc?: string;
  gradient?: string;
  class?: string;
}

const {
  title,
  description,
  icon,
  iconSrc,
  gradient = 'from-primary/20 to-secondary/20',
  class: className = ''
} = Astro.props;
---

<Card variant="feature" class={`group ${className}`} glow>
  <div class="flex flex-col items-center text-center space-y-4">
    <!-- Icon Container -->
    <div class={`
      relative w-20 h-20 rounded-full flex items-center justify-center
      bg-gradient-to-br ${gradient}
      border-2 border-primary/30 group-hover:border-primary/50
      transition-all duration-300
      group-hover:scale-110 group-hover:rotate-3
    `}>
      <!-- Glow Effect -->
      <div class="absolute inset-0 rounded-full bg-gradient-to-br from-primary/30 to-secondary/30 blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      
      <!-- Icon -->
      {iconSrc ? (
        <img 
          src={iconSrc} 
          alt={title}
          class="w-10 h-10 relative z-10 filter drop-shadow-lg"
        />
      ) : icon ? (
        <Icon 
          name={icon} 
          class="w-10 h-10 text-primary relative z-10 filter drop-shadow-lg"
        />
      ) : (
        <div class="w-10 h-10 bg-primary/20 rounded-lg relative z-10"></div>
      )}
      
      <!-- Rotating Border -->
      <div class="absolute inset-0 rounded-full border-2 border-transparent bg-gradient-to-r from-primary via-secondary to-accent bg-clip-border opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-spin-slow"></div>
    </div>
    
    <!-- Content -->
    <div class="space-y-2">
      <h3 class="text-xl font-bold text-primary group-hover:text-primary-400 transition-colors duration-300">
        {title}
      </h3>
      <p class="text-base-content/80 leading-relaxed group-hover:text-base-content/90 transition-colors duration-300">
        {description}
      </p>
    </div>
    
    <!-- Hover Arrow -->
    <div class="opacity-0 group-hover:opacity-100 transform translate-y-2 group-hover:translate-y-0 transition-all duration-300">
      <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
      </svg>
    </div>
  </div>
</Card>

<style>
  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  .animate-spin-slow {
    animation: spin-slow 8s linear infinite;
  }
</style>